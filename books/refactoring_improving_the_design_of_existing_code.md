# refactoring improving the design of existing code 
Written by Martin Fowler (American)
# 重构 改善既有代码的设计
熊节（译）

重构的定义：在不改变软件可观察行为的前提下改善其内部结构。

### 第一章 重构 第一个案例

> 如果你发现自己需要为一个程序添加一个特性，而代码结构使你无法很方便地达成目的，那就先重构那个程序，使特性的添加比较容易进行，然后再添加特性。

> 重构之前，首先检查自己是否有一套可靠的测试机制，这些测试必须有自我检验能力。

Q： 测试需要什么特性，在前端如何编写测试呢？

第一章以后有需要可以再看一遍，现在只是囫囵吞枣地过了一遍，有点“太长不看”的意思。

### 第二章 重构原则

> 事不过三，三则重构。

何时不该进行重构:

- 现有代码根本不能正常运作（此时该重写而非重构）

- 项目已近最后期限。（重构的确能提高生产力，但是时间紧急的情况下不应该分心于重构。如果最后你没有足够的时间，通常就表示你其实早该进行重构。）

重构与设计：

在写代码之前，如果力求设计灵活性高，那么这个软件会变得复杂而难以维护。尤其是为系统各处所有可能变化的地方建立起灵活性时，整个系统的复杂度和维护难度都会大大提高。为了获得自己想要的灵活性，你不得不加入比实际需要更多的灵活性。当然，如果最后发现所有这些灵活性都毫无用处，这才是最大的失败。

有了重构，你可以有一种不同的方式来设计这些软件。你仍然需要思考潜在的变化以及相应的灵活的解决方案，但是你现在可以不用每个都去实现。在实现之前询问自己：“把一个简单的方案重构成这个灵活的方案需要多大难度？”，如果答案是：“相当容易”，那么现在可以先实现这个简单的方案，待以后有需求的时候再重构成灵活的方案。

### 第三章 代码的坏味道

看完全书之后应该再回顾一下第三章。因为第一次看第三章时，对于各种情况的处理，作者列出了许多重构的手法，但是这些手法细节都在后面，所以应该在看完全书之后再回顾一下第三章，加深理解。
