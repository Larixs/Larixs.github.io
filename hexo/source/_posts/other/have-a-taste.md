---
title: 技术尝鲜
categories: other
---

提及的库，大多没有深入使用过，仅做尝鲜记录。

## 拖拽库

### DnD(Drag and Drop) + react

能力方面：
将drag和drop变为了一个抽象的对象，而不是对dom进行直接操作。拖拽表现主要基于[HTML5 drag and drop API](https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API)。 由于拖拽表现基于原生实现，使拖拽表现更流畅，但其兼容性也受限于浏览器的api实现情况。也可以搭配第三方库的拖拽事件使用。使用核心在于理解items,types,monitors,connectors,drag source, drop target的概念以及他们之间的关系。

文档方面：
文档结构清晰，通过实例讲解各核心概念的运用，方便理解。文档没有中文版本。

## 表单库

### formik + react

能力方面： 
formik主要是负责收集表单数据以及校验，表单的生成和联动是不在负责范围内的。因为负责的功能单一，所以灵活性高，容易debug，但配置也比较繁琐。因此formik和其他第三方库配合使用更佳，例如校验使用Yup（formik官方推荐），组件库使用antd。formik支持使用相应hook的自定义组件。

文档方面：
文档通俗易懂，由不带sugar的使用方法，一步一步变为带sugar的使用方法，既简单介绍了原理，又讲明白了sugar的用法，思路清晰流畅，赞一个。唯一美中不足的是：文档没有中文版本，英语不好的人读起来有些头大。


### uform + react + antd

能力方面：
uform有两种生成表单的方式，一种是普通的组件构建，另一种是通过JSON Schema来生成表单。uform也接管了表单值收集、校验、联动等功能。内置第三方库的相关组件（例如antd)，也支持自定义组件(只要满足约定的值回传方式)。uform接管的事情比较多，上手方便快捷，但相对来说灵活性低一些，如果出了bug也不好寻找。

文档方面：
文档结构有些零乱，有些操作方法甚至只在示例里使用。

## 图表库

### D3.js

能力方面：
支持svg和canvas两种绘图方式。
库主要提供图表元件的操作api或者一些计算api，例如关于轴设置的api、关于力学导图的api。由各种各样的api自由组合成图表，自由度极高，适合各类自定义图表。

文档方面：
只有每个api的介绍文档，如何使用靠参考示例或者全靠自己发挥。文档像一本字典，会告诉你现在有哪些字，每个字怎么读、怎么写、是什么意思，但不会教你整篇文章怎么写。没有官方中文文档，民间中文文档更新滞后、质量不高（目前落后整整一个大版本）。

### Highcharts

能力方面：仅svg绘图。主要以提供配置项的方式生成图表。配置项结构清晰。由于是svg绘图，在定制样式的时候，除了库提供的配置，还是可以通过寻找对应svg元素来改变样式。

文档方面：文档结构清晰，易于搜索。部分配置项还提供在线示例，方便理解和试用，这点非常赞。

另：某些延伸版本是需要收费的（例如Highstocks）?


### ECharts

能力方面：支持canvas和svg绘图。主要以提供配置项的方式生成图表。在使用过程中发现了一些bug，例如想生成一个（不同类型数据）重叠的柱状图，在特定窗口大小下，本应该重叠的柱子会发生错位。

文档方面：文档结构清晰，配置项并没有按照字母顺序排列，但是有提供搜索功能。可能是文档更新不及时的缘故，某些配置项并没有按照文档描述那样运行。

## 其他

### 加水印

[给图片加水印](https://github.com/pa7/watermark.js)：使用canvas读取图片并添加水印，然后再将canvas导出为图片。

最开始对加水印感兴趣是看见了阿里语雀的水印。阿里的实现方式和上面的库不太一样，他是将水印大图作为需要加水印区域的背景图。我猜测的实现方案：绘制canvas -> 转为base43 -> 给对应区域设上背景图。实现方式类似于[gwm](https://github.com/loadchange/gwm/tree/master/lib)的canvas模式。