---
title: https
tags: [study notes, web]
categories: other
---

## HTTP的缺点

- 内容使用明文通信，可能会被窃听
- 无法验证报文的完整性，可能会被篡改
- 不确认对方的身份，可能会遭遇伪装

## HTTPS的相应措施

### 针对内容使用明文通信，采用SSL对整个通信线路进行加密处理。

HTTPS是在SSL(secure socket layer)建立的安全线路上进行http通信。SSL后来演化成TLS(transport layer security)。

SSL建立连接时采用公开秘钥加密。公开秘钥加密使用一对非对称的秘钥，一把叫私钥，一把叫公钥。私钥不能让任何人知道，公钥可以随意发布。 发送报文的一方，使用对方的公钥进行加密，当对方收到用公钥加密的报文后，使用自己的私钥进行解密。

在建立链接后，为了提升处理速度，之后建立的报文交换使用共享秘钥加密方式。共享秘钥加密就是加密解密用同一个秘钥。

### 针对通信身份无法确认，利用SSL提供的证书认证判别对方的身份。

在加密的时候提到，SSL建立的时候采用公开秘钥加密。新问题又出现了，怎么认证公钥是否是正确的呢？

为了解决公钥认证的问题，可以由数字证书认证机构(CA, Certificate Authority)和相关机构颁发的公钥证书。数字证书机构一般是客户端和服务器都可信赖的第三方机构。

首先，服务器的运营人员先向数字证书机构提出公钥的申请，机构在判明身份后，会对已申请的公钥做数字签名（像是盖公章）及分配，并将其放入公钥证书。

服务器会将这份公钥证书发送给客户端。客户端接受到证书后，对数字签名（公章）进行验证，如果验证成功，可以证明：1. 证书是由信赖的机构发布的。2. 服务器端的这个公钥是值得信赖的。

随后客户端就可以用这个认证过的公钥对报文进行加密，发送到服务器端。

### 针对无法验证报文的正确性

在通信的流程中，应用层发送数据时会附加MAC( message authentication code )报文摘要。MAC能查知报文是否遭到篡改，从而保护报文的完整性。


### HTTPS的缺点

- 加密通信会消耗更多的CPU和内存资源
- 要钱
